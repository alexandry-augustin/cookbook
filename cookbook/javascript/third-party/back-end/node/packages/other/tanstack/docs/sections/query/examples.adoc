= Examples

== Basic

https://tanstack.com/query/v4/docs/framework/vue/guides/queries

https://tanstack.com/query/latest/docs/framework/vue/quick-start

[source,vue,title="App.vue"]
----
<script setup>
import axios from 'axios';
import { useQuery } from "@tanstack/vue-query";
import { VueQueryDevtools } from '@tanstack/vue-query-devtools';

function fetchData() {
    return { msg: "Hello World!" }
}
const { isLoading, isError, data, error, fetchStatus } = useQuery({
    queryKey: [ "user" ],
    queryFn: () => axios.call("get", "URL"), 
    select: (response) => response.data
    // queryFn: fetchData,
});
</script>

<template>    
    <div v-if="isLoading">
        Loading...
        <div v-if="fetchStatus"> {{ fetchStatus }}</div>
    </div>
    <div v-else-if="isError">Error: {{ error.message }}</div>
    <!-- We can assume by this point that `isSuccess === true` -->
    <div v-else-if="data">
        {{ data }}
    </div>
</template>
----

== Using Composable

https://www.vuemastery.com/blog/advanced-data-fetching-in-vue-w-tanstack-query/#a-vue-query-demo

[source,vue,title="composables/useUserQuery.vue"]
----
import axios from 'axios';
import { useQuery } from "@tanstack/vue-query";

export default () => {
  return useQuery({
    queryKey: [ "user" ],
    queryFn: () => axios.call("get", "http://127.0.0.1:8000/api/user"), 
    select: (response) => response.data
  });
};
----

[source,vue,title="App.vue"]
----
<script setup>
import useUserQuery from '@/composables/useUserQuery';
const { isLoading, isError, data, error, fetchStatus } = useUserQuery();
</script>

<template>
    <div v-if="isLoading">
        Loading...
        <div v-if="fetchStatus"> {{ fetchStatus }}</div>
    </div>
    <div v-else-if="isError">Error: {{ error.message }}</div>
    <!-- We can assume by this point that `isSuccess === true` -->
    <div v-else-if="data">
        {{ data }}
    </div>
</template>
----