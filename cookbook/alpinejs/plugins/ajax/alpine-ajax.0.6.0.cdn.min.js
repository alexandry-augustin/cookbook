(()=>{var m={headers:{},mergeStrategy:"replace",transitions:!1,followRedirects:!0},M=(e,t)=>{console.error(`You can't use the "morph" merge without first installing the Alpine "morph" plugin here: https://alpinejs.dev/plugins/morph`)};function y(e){e.morph&&(M=e.morph),e.directive("target",(r,{value:i,modifiers:a,expression:u},{evaluateLater:s,effect:n})=>{let d=o=>{c.set(r,{targets:C(r,o),focus:!a.includes("nofocus"),history:a.includes("push")?"push":a.includes("replace")?"replace":!1,follow:m.followRedirects?!a.includes("nofollow"):a.includes("follow")})};if(i==="dynamic"){let o=s(u);n(()=>o(d))}else d(u)}),e.directive("headers",(r,{expression:i},{evaluateLater:a,effect:u})=>{let s=a(i||"{}");u(()=>{s(n=>{c.set(r,{headers:n})})})}),e.addInitSelector(()=>`[${e.prefixed("merge")}]`),e.directive("merge",(r,{value:i,modifiers:a,expression:u},{evaluateLater:s,effect:n})=>{let d=o=>{c.set(r,{strategy:o||m.mergeStrategy,transition:m.transitions||a.includes("transition")})};if(i==="dynamic"){let o=s(u);n(()=>o(d))}else d(u)}),e.magic("ajax",r=>async(i,a={})=>{let u=T(C(r,a.targets||a.target));u=a.sync?D(u):u;let s=R(r),n=Object.assign({},m.headers,a.headers||{}),d=a.method?a.method.toUpperCase():"GET",o=a.body,f="followRedirects"in a?a.followRedirects:m.followRedirects,g=await j(r,u,i,s,n,f,d,o),h=a.history||c.get(r,"history"),l="focus"in a?a.focus:c.get(r,"focus",!0);return v(g,r,u,h,l)});let t=[];e.ajax={start(){t.length||(t.push(L("submit",q)),t.push(L("click",P)))},stop(){t.forEach(r=>r()),t=[]}},e.ajax.start()}y.configure=e=>(m=Object.assign(m,e),y);var O=y,c={store:new WeakMap,set(e,t){this.store.has(e)?this.store.set(e,Object.assign(this.store.get(e),t)):this.store.set(e,t)},get(e,t,r=null){let i=this.store.get(e)||{};return t in i?i[t]:r},has(e){return this.store.has(e)}};async function P(e){if(e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e?.target.closest("a[href]:not([download]):not([noajax])");if(!t||!c.has(t)||t.isContentEditable||t.getAttribute("href").startsWith("#")||t.origin!==location.origin||t.pathname+t.search===location.pathname+location.search&&t.hash)return;e.preventDefault(),e.stopImmediatePropagation();let r=D(T(c.get(t,"targets",[]))),i=R(t),a=t.getAttribute("href")||i,u=c.get(t,"headers",{}),s=c.get(t,"follow",m.followRedirects),n=await j(t,r,a,i,u,s),d=c.get(t,"history"),o=c.get(t,"focus",!0);try{return await v(n,t,r,d,o)}catch(f){if(f.name==="RenderError"){console.warn(f.message),window.location.href=t.href;return}throw f}}async function q(e){if(e.defaultPrevented)return;let t=e.target,r=e.submitter,i=(r?.getAttribute("formmethod")||t.getAttribute("method")||"GET").toUpperCase();if(!t||!c.has(t)||i==="DIALOG"||r?.hasAttribute("formnoajax")||r?.hasAttribute("formtarget")||t.hasAttribute("noajax")||t.hasAttribute("target"))return;e.preventDefault(),e.stopImmediatePropagation();let a=D(T(c.get(t,"targets",[]))),u=R(t),s=t.getAttribute("action")||u,n=c.get(t,"headers",{}),d=c.get(t,"follow",m.followRedirects),o=new FormData(t),f=t.getAttribute("enctype");r&&(f=r.getAttribute("formenctype")||f,s=r.getAttribute("formaction")||s,r.name&&o.append(r.name,r.value));let g=await G(r,()=>j(t,a,s,u,n,d,i,o,f)),h=c.get(t,"history"),l=c.get(t,"focus",!0);try{return await v(g,t,a,h,l)}catch(w){if(w.name==="RenderError"){console.warn(w.message),t.setAttribute("noajax","true"),t.requestSubmit(r);return}throw w}}function L(e,t){let r=async a=>{try{await t(a)}catch(u){if(u.name==="AbortError")return;throw u}},i=()=>{document.removeEventListener(e,r,!1),document.addEventListener(e,r,!1)};return document.addEventListener(e,i,!0),()=>document.removeEventListener(e,i,!0)}async function G(e,t){if(!e)return await t();let r=a=>a.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",r);let i=await t();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",r),i}var N={store:new Map,abort(e){if(this.store.has(e)){let t=this.store.get(e);t.controller.abort(),t.target.removeAttribute("aria-busy")}},set(e,t,r){this.abort(e),t.querySelectorAll("[aria-busy]").forEach(i=>this.abort(i.getAttribute("id"))),this.store.set(e,{target:t,controller:r}),t.setAttribute("aria-busy","true")}},b=new Map;async function j(e,t,r,i,a,u,s="GET",n=null,d="application/x-www-form-urlencoded"){if(!p(e,"ajax:before"))throw new DOMException("[ajax:before] aborted","AbortError");let o=new AbortController,f=[];t.forEach(l=>{let w=l.getAttribute("id");N.set(w,l,o),f.push(w)});let g;s==="GET"&&b.has(r)?g=b.get(r):(a["X-Alpine-Target"]=f.join("  "),a["X-Alpine-Request"]="true",a=Object.assign({},m.headers,a),n&&(n=U(n),s==="GET"?(r=$(n,r),n=null):d!=="multipart/form-data"&&(n=k(n))),g=fetch(r,{method:s,headers:a,body:n,referrer:i,signal:o.signal}).then(l=>(!u&&l.redirected&&(window.location.href=l.url),l)).then(async l=>(l.html=await l.text(),l)),b.set(r,g));let h=await g;return b.delete(r),h.ok?p(e,"ajax:success",h):p(e,"ajax:error",h),p(e,"ajax:after",h),h}function U(e){if(e instanceof FormData)return e;if(e instanceof HTMLFormElement)return new FormData(e);let t=new FormData;for(let r in e)typeof e[r]=="object"?t.append(r,JSON.stringify(e[r])):t.append(r,e[r]);return t}function $(e,t){return t=new URL(t,document.baseURI),t.search=k(e).toString(),t.toString()}function k(e){let t=Array.from(e.entries()).filter(([r,i])=>!(i instanceof File));return new URLSearchParams(t)}async function v(e,t,r,i,a){if(!e.html){r.forEach(o=>o.removeAttribute("aria-busy"));return}i&&H(i,e.url);let s=document.createRange().createContextualFragment("<template>"+e.html+"</template>").firstElementChild.content,n=!a,d=r.map(async o=>{let f=s.getElementById(o.getAttribute("id")),g=c.get(o,"strategy",m.mergeStrategy);if(!f){if(!p(t,"ajax:missing",{target:o,response:e}))return;if(e.ok)return o.remove();throw new x(o,e.status)}let h=async()=>{let l=await B(g,o,f);return l&&(l.dataset.source=e.url,l.removeAttribute("aria-busy"),["[x-autofocus]","[autofocus]"].some(S=>n?!0:(l.matches(S)&&(n=I(l)),n||Array.from(l.querySelectorAll(S)).some(F=>I(F))))),p(l,"ajax:merged"),l};if(p(o,"ajax:merge",{strategy:g,content:f,merge:h}))return h()});return await Promise.all(d)}async function B(e,t,r){let i={before(s,n){return s.before(...n.childNodes),s},replace(s,n){return s.replaceWith(n),n},update(s,n){return s.replaceChildren(...n.childNodes),s},prepend(s,n){return s.prepend(...n.childNodes),s},append(s,n){return s.append(...n.childNodes),s},after(s,n){return s.after(...n.childNodes),s},morph(s,n){return M(s,n),document.getElementById(n.getAttribute("id"))}};if(!c.get(t,"transition")||!document.startViewTransition)return i[e](t,r);let a=null;return await document.startViewTransition(()=>(a=i[e](t,r),Promise.resolve())).updateCallbackDone,a}function I(e){return!e||!e.getClientRects().length?!1:(setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0),!0)}function H(e,t){return{push:()=>window.history.pushState({__ajax:!0},"",t),replace:()=>window.history.replaceState({__ajax:!0},"",t)}[e]()}function C(e,t=null){let r=[e.getAttribute("id")];if(t&&(r=Array.isArray(t)?t:t.split(" ")),r=r.filter(i=>i),r.length===0)throw new A(e);return r}function T(e=[]){return e.map(t=>{let r=document.getElementById(t);if(!r)throw new E(t);return r})}function D(e){return document.querySelectorAll("[x-sync]").forEach(t=>{let r=t.getAttribute("id");if(!r)throw new IdNotFoundError(t);e.some(i=>i.getAttribute("id")===r)||e.push(t)}),e}function R(e){return e.closest("[data-source]")?.dataset.source||window.location.href}function p(e,t,r){return e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}var A=class extends DOMException{constructor(t){let r=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${r} is missing an ID to target.`,"IDError")}},E=class extends DOMException{constructor(t){super(`[#${t}] was not found in the current document.`,"TargetError")}},x=class extends DOMException{constructor(t,r){let i=t.getAttribute("id");super(`Target [#${i}] was not found in response with status [${r}].`,"RenderError")}};document.addEventListener("alpine:initializing",()=>{O(window.Alpine)});})();
