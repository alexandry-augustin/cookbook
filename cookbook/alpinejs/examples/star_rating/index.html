<!-- Adapted from https://codepen.io/rehhouari/pen/NWdrXjz -->

<html>
	<head>
		<meta charset="utf-8">
		<title>Alpine.js</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" 
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
			crossorigin="anonymous">
		<link rel="stylesheet" 
    		href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
	</head>

	<body>
		<div>
			<div x-data="
				{
					rating: 0,
					hoverRating: 0,
					ratings: [
						{ 
							'amount': 1, 
							'label':'Terrible'
						}, 
						{
							'amount': 2, 
							'label':'Bad'
						}, 
						{
							'amount': 3, 
							'label':'Okay'
						}, 
						{
							'amount': 4, 
							'label':'Good'
						}, 
						{
							'amount': 5, 
							'label':'Great'
						}
					],
					rate(amount) {
						if (this.rating == amount) 
							this.rating = 0;
						else 
							this.rating = amount;
					},
					currentLabel() {
						let r = this.rating;
						if (this.hoverRating != this.rating) 
							r = this.hoverRating;
						let i = this.ratings.findIndex(e => e.amount == r);
						if (i >=0) 
							return this.ratings[i].label;
						else 
							return '';
					}
				}">

				<span>
					<template 
						x-for="(star, index) in ratings" 
						:key="index">
						<button 
							@click="rate(star.amount)" 
							@mouseover="hoverRating = star.amount" 
							@mouseleave="hoverRating = rating"
							aria-hidden="true"
							:title="star.label"
							class="text-gray-400 w-6"
							:class="
							{
								'text-gray-600': hoverRating >= star.amount, 
								'text-yellow-400': rating >= star.amount && hoverRating >= star.amount
							}">
							<i class="bi bi-star-fill"></i>
						</button>
					</template>
				</span>

				<span>
					<template x-if="rating || hoverRating">
						<span x-text="currentLabel()"></span>
					</template>
					<template x-if="!rating && !hoverRating">
						<span hidden>Not Rated</span>
					</template>
				</span>
			
			</div>
		</div>
		
		<script type='text/javascript' charset='utf-8' src='../../alpinejs.3.13.2.cdn.min.js'></script>
	</body>
</html> 
